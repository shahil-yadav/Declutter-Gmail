<div class="user-details-layout">
    @if (user) {
    <header class="user-navbar"
        [style.background-image]="'linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.7)), url(' + user.CoverPhoto + ')'">
        <div class="nav-content">
            <a mat-icon-button routerLink="/" class="back-button">
                <mat-icon>arrow_back</mat-icon>
            </a>

            @if (isDev) {
            <div class="dev-controls">
                <mat-slide-toggle [(ngModel)]="simulateError" (change)="toggleErrorSimulation()" color="warn">
                    Simulate Error
                </mat-slide-toggle>
            </div>
            }

            <div class="user-info">
                <div class="avatar" [style.background-image]="'url(' + user.CoverPhoto + ')'"></div>
                <div class="text-info">
                    <h1>{{ user.FullName }}</h1>
                    <span class="email">{{ user.Email }}</span>
                </div>
            </div>
        </div>
    </header>

    <main class="page-body">
        <!-- Body content will be added later -->
        <div class="placeholder-content">
            <p>Select an action to proceed</p>
        </div>
    </main>
    } @else if (loading) {
    <div class="loading-state">
        <mat-spinner diameter="40"></mat-spinner>
    </div>
    } @else if (errorMessage) {
    <div class="error-state">
        @if (errorMessage.includes('User not found')) {
        <mat-icon class="warning-icon">warning</mat-icon>
        } @else {
        <mat-icon class="error-icon">error_outline</mat-icon>
        }

        <p>{{ errorMessage }}</p>
        <button mat-raised-button color="primary" routerLink="/">Return to Safety</button>
    </div>
    }
</div>